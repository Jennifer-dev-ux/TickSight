<section class="report-section container py-4">
<h4>Report a tick sighting</h4>

    <?php if (!empty($success)): ?>
        <div class="alert alert-success">
            Thank you! Your sighting has been recorded.
        </div>
    <?php endif; ?>

    <form action="../index.php?page=report" method="post" enctype="multipart/form-data" class="report-form row g-3">
        <div class="col-12 col-md-6">
            <label for="date">Date *</label>
            <input
                    type="date"
                    id="date"
                    name="date"
                    class="form-control<?= !empty($errors['date']) ? ' is-invalid' : '' ?>"
                    value="<?= htmlspecialchars($old['date'] ?? '', ENT_QUOTES, 'UTF-8') ?>"
                    required
            >
            <?php if (!empty($errors['date'])): ?>
                <div class="invalid-feedback d-block">
                    <?= htmlspecialchars($errors['date'], ENT_QUOTES, 'UTF-8') ?>
                </div>
            <?php endif; ?>
        </div>

        <div class="col-12 col-md-6">
            <label for="time" class="form-label">Time *</label>
            <input
                    type="time"
                    id="time"
                    name="time"
                    class="form-control<?= !empty($errors['time']) ? ' is-invalid' : '' ?>"
                    value="<?= htmlspecialchars($old['time'] ?? '', ENT_QUOTES, 'UTF-8') ?>"
                    required
            >
            <?php if (!empty($errors['time'])): ?>
                <div class="invalid-feedback d-block">
                    <?= htmlspecialchars($errors['time'], ENT_QUOTES, 'UTF-8') ?>
                </div>
            <?php endif; ?>
        </div>

        <div class="col-12">
            <label for="location" class="form-label">Location (city) *</label>
            <input
                    type="text"
                    id="location"
                    name="location"
                    class="form-control<?= !empty($errors['location']) ? ' is-invalid' : '' ?>"
                    value="<?= htmlspecialchars($old['location'] ?? '', ENT_QUOTES, 'UTF-8') ?>"
                    required
            >
            <?php if (!empty($errors['location'])): ?>
                <div class="invalid-feedback d-block">
                    <?= htmlspecialchars($errors['location'], ENT_QUOTES, 'UTF-8') ?>
                </div>
            <?php endif; ?>
        </div>

        <!-- Species dropdown -->
        <div class="col-12 col-md-6">
            <label for="species" class="form-label">Species *</label>
            <select
                    id="species"
                    name="species"
                    class="form-select<?= !empty($errors['species']) ? ' is-invalid' : '' ?>"
                    required>
                <option value="">Select a species</option>

                <option value="Passerine tick"
                        <?= ($old['species'] ?? '') === 'Passerine tick' ? 'selected' : '' ?>>
                    Passerine tick
                </option>

                <option value="Fox/badger tick"
                        <?= ($old['species'] ?? '') === 'Fox/badger tick' ? 'selected' : '' ?>>
                    Fox/badger tick
                </option>

                <option value="Southern rodent tick"
                        <?= ($old['species'] ?? '') === 'Southern rodent tick' ? 'selected' : '' ?>>
                    Southern rodent tick
                </option>

                <option value="Marsh tick"
                        <?= ($old['species'] ?? '') === 'Marsh tick' ? 'selected' : '' ?>>
                    Marsh tick
                </option>

                <option value="Tree-hole tick"
                        <?= ($old['species'] ?? '') === 'Tree-hole tick' ? 'selected' : '' ?>>
                    Tree-hole tick
                </option>
            </select>
            <?php if (!empty($errors['species'])): ?>
                <div class="invalid-feedback d-block">
                    <?= htmlspecialchars($errors['species'], ENT_QUOTES, 'UTF-8') ?>
                </div>
            <?php endif; ?>
        </div>

        <div class="col-12">
            <label for="description" class="form-label">Description (optional)</label>
            <textarea
                    id="description"
                    name="description"
                    rows="4"
                    class="form-control"
            ><?= htmlspecialchars($old['description'] ?? '', ENT_QUOTES, 'UTF-8') ?></textarea>
        </div>

        <div class="col-12">
            <label for="image" class="form-label">Upload a photo (optional)</label>
            <input
                    type="file"
                    id="image"
                    name="image"
                    class="form-control<?= !empty($errors['image']) ? ' is-invalid' : '' ?>"
                    accept="image/*"
            >
            <?php if (!empty($errors['image'])): ?>
                <div class="invalid-feedback d-block">
                    <?= htmlspecialchars($errors['image'], ENT_QUOTES, 'UTF-8') ?>
                </div>
            <?php endif; ?>
        </div>

        <div class="col-12 d-grid d-md-flex justify-content-md-end">
            <button type="submit" class="btn btn-primary">
                Submit sighting
            </button>
        </div>
    </form>
</section>



